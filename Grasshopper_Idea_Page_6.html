<html>

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159411627-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-159411627-1');
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=yes">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <title>06_Converting the given line into a flat surface</title>
    <link rel="icon" type="image/x-icon" href="assets/img/my_site_logo.ico">
</head>
<body id="contact-body" style="overflow-x: hidden;">
<div>
    <nav class="nav-desk">
        <div class="nav-logo">

            <a href="index.html"><img id="logo" src="assets/img/inchanchan.png"></a>

        </div>
        <div class="nav-items">
            <ul>
                <li><span><a href="about.html">About</a></span></li>
                <li><span><a href="work.html">Work</a></span></li>
                <li><span><a href="PM.html">Parametric Design</a></span></li>
                <li><span><a href="Grasshopper_Idea.html"
                             style="text-decoration: line-through;">Grasshopper Idea</a></span></li>
                <li><span><a href="contact.html">Contact</a></span></li>
            </ul>
        </div>
    </nav>

    <!--Content-->
    <div class="animated bounceInUp delay-1s">
        <div class="row" id="work-row">
            <!--Text-->
            <div class="row work-double-row">
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-idea  fadeInLeft">06_Converting the given line into a flat
                        surface</h2>
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <b>Key Ideas:</b>
                        <br><br>
                        1. Conditions for a plane to exist.
                        <br><br>
                        2. Some curves include a plane.
                    </p>
                </div>
            </div>
            <!--text_final-->

            <!--panel-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Key Idea 1 : 1. Conditions for a plane to
                        exist.</h2>
                </div>
                <!--key idea text_final-->

                <!--key idea img-->
                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="description">
                        <br>
                        <p><strong>Plane Determination Conditions:</strong></p>
                        <p>
                            <b>1. Three points not on the same straight line</b>
                            <br>
                            <br>
                            Plane(Point3d origin, Point3d xPoint, Point3d yPoint)
                            <br>
                            Initializes a plane from three non-collinear points.
                        </p>
                        <br>
                        <p>
                            <b>2. A straight line and a point not on that line</b>
                            <br>
                            <br>
                            Plane(Point3d origin, Vector3d normal)

                            <br>
                            Constructs a plane from a point and a normal vector.
                        </p>
                        <br>
                        <p>
                            <b>3. Two lines intersecting at one point</b>
                            <br>
                            <br>
                            Plane(Point3d origin, Vector3d xDirection, Vector3d yDirection)
                            <br>

                            Constructs a plane from a point and two vectors in the plane.
                        </p>
                        <br>
                        <p>
                            <b>4. Two parallel lines</b>
                        </p>
                    </div>
                </div>


                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/05_idea1.png"
                             onclick="openModal(this)">
                        <h1>The above image shows the conditions for a plane to exist.</h1>
                    </div>
                </div>
                <!--key idea img_final-->
            </div>
            <!--panel_final-->

            <!--panel-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Key Idea 2 : 2. Some curves include a
                        plane.</h2>
                </div>
                <!--key idea text_final-->

                <!--key idea img-->
                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/05_idea2_1.png"
                             onclick="openModal(this)">
                        <h1>Some Curves have its plane</h1>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/05_idea2.png"
                             onclick="openModal(this)">
                        <h1>You should be able to determine whether or not a curve includes a plane by observing its
                            shape.</h1>
                    </div>
                </div>
                <!--key idea img_final-->
            </div>
            <!--panel_final-->

            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Write the c# script code by using Key Idea 1
                        and Key Idea 2.</h2>
                </div>
                <!--key idea text_final-->

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="description">
                        <p><strong>C# Code Implementation:</strong></p>
                        <pre style="background-color:#2b2b2b; color:#a9b7c6; padding: 10px; border-radius: 5px;">
<span style="color:#ffc66d;">private</span> <span style="color:#ffc66d;">void</span> RunScript(List&lt;<span style="color:#ffc66d;">Curve</span>&gt; x, object y, ref object A, ref object B)
{
    <span style="color:#cc7832;">var</span> dictPlane = MakeHashCurvePlane(x);
    List&lt;List&lt;<span style="color:#ffc66d;">Curve</span>&gt;&gt; ret = <span style="color:#cc7832;">new</span> List&lt;List&lt;<span style="color:#ffc66d;">Curve</span>&gt;&gt;();
    List&lt;List&lt;<span style="color:#ffc66d;">Plane</span>&gt;&gt; pls = <span style="color:#cc7832;">new</span> List&lt;List&lt;<span style="color:#ffc66d;">Plane</span>&gt;&gt;();

    <span style="color:#cc7832;">foreach</span> (<span style="color:#cc7832;">var</span> g <span style="color:#cc7832;">in</span> dictPlane.Values)
    {
        ret.Add(g);
    }

    <span style="color:#cc7832;">foreach</span> (<span style="color:#cc7832;">var</span> g <span style="color:#cc7832;">in</span> dictPlane)
    {
        pls.Add(<span style="color:#cc7832;">new</span> List&lt;<span style="color:#ffc66d;">Plane</span>&gt; { g.Key });
    }

    A = MakeDataTree2D(ret);
    B = MakeDataTree2D(pls);
}

<span style="color:#808080;">#endregion</span>

<span style="color:#808080;">#region Additional</span>

<span style="color:#ffc66d;">public</span> <span style="color:#ffc66d;">Dictionary&lt;</span><span style="color:#ffc66d;">Plane</span>, List&lt;<span style="color:#ffc66d;">Curve</span>&gt;&gt; MakeHashCurvePlane(List&lt;<span style="color:#ffc66d;">Curve</span>&gt; crv)
{
    <span style="color:#ffc66d;">Dictionary&lt;</span><span style="color:#ffc66d;">Plane</span>, List&lt;<span style="color:#ffc66d;">Curve</span>&gt;&gt; dictPlane = <span style="color:#cc7832;">new</span> <span style="color:#ffc66d;">Dictionary&lt;</span><span style="color:#ffc66d;">Plane</span>, List&lt;<span style="color:#ffc66d;">Curve</span>&gt;&gt;();
    List&lt;<span style="color:#ffc66d;">Line</span>&gt; lines = <span style="color:#cc7832;">new</span> List&lt;<span style="color:#ffc66d;">Line</span>&gt;();

    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span style="color:#6897bb;">0</span>; i &lt; crv.Count; i++)
    {
        <span style="color:#ffc66d;">Curve</span> now = crv[i];
        <span style="color:#ffc66d;">Plane</span> p;

        <span style="color:#cc7832;">if</span> (now.IsLinear())
        {
            lines.Add(<span style="color:#cc7832;">new</span> <span style="color:#ffc66d;">Line</span>(now.PointAtStart, now.PointAtEnd));
        }
        <span style="color:#cc7832;">else if</span> (now.IsPlanar())
        {
            <span style="color:#cc7832;">if</span> (FindPlane(dictPlane.Keys.ToList(), now, <span style="color:#ffc66d;">out</span> p))
            {
                dictPlane[p].Add(now);
            }
            <span style="color:#cc7832;">else</span>
            {
                now.TryGetPlane(<span style="color:#ffc66d;">out</span> p);
                dictPlane[p] = <span style="color:#cc7832;">new</span> List&lt;<span style="color:#ffc66d;">Curve</span>&gt; { now };
            }
        }
    }

    List&lt;<span style="color:#cc7832;">bool</span>&gt; vis = Enumerable.Repeat(<span style="color:#cc7832;">false</span>, lines.Count).ToList();

    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span style="color:#6897bb;">0</span>; i &lt; lines.Count; i++)
    {
        <span style="color:#cc7832;">if</span> (vis[i]) <span style="color:#cc7832;">continue</span>;

        <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> j = <span style="color:#6897bb;">0</span>; j &lt; lines.Count; j++)
        {
            <span style="color:#cc7832;">if</span> (vis[j] || (i == j)) <span style="color:#cc7832;">continue</span>;

            <span style="color:#ffc66d;">var</span> ccw = Intersection.CurveCurve(lines[i].ToNurbsCurve(), lines[j].ToNurbsCurve(), 0.1, 0.0);
            <span style="color:#cc7832;">if</span> (ccw.Count &gt; 0)
            {
                <span style="color:#ffc66d;">Plane</span> p;
                <span style="color:#cc7832;">if</span> (FindPlane(dictPlane.Keys.ToList(), lines[i].ToNurbsCurve(), <span style="color:#ffc66d;">out</span> p))
                {
                    dictPlane[p].Add(lines[i].ToNurbsCurve());
                    dictPlane[p].Add(lines[j].ToNurbsCurve());
                }
                <span style="color:#cc7832;">else</span>
                {
                    p = <span style="color:#cc7832;">new</span> <span style="color:#ffc66d;">Plane</span>(lines[i].From, lines[i].Direction, lines[j].Direction);
                    dictPlane[p] = <span style="color:#cc7832;">new</span> List&lt;<span style="color:#ffc66d;">Curve</span>&gt; { lines[i].ToNurbsCurve(), lines[j].ToNurbsCurve() };
                }

                vis[j] = <span style="color:#cc7832;">true</span>;
                vis[i] = <span style="color:#cc7832;">true</span>;
                <span style="color:#cc7832;">break</span>;
            }
        }
    }

    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span style="color:#6897bb;">0</span>; i &lt; lines.Count; i++)
    {
        <span style="color:#ffc66d;">if</span> (!vis[i])
        {
            <span style="color:#ffc66d;">Plane</span> p;
            <span style="color:#cc7832;">if</span> (FindPlane(dictPlane.Keys.ToList(), lines[i].ToNurbsCurve(), <span style="color:#ffc66d;">out</span> p))
            {
                dictPlane[p].Add(lines[i].ToNurbsCurve());
            }
        }
    }

    <span style="color:#cc7832;">return</span> dictPlane;
}

<span style="color:#ffc66d;">public</span> <span style="color:#ffc66d;">bool</span> FindPlane(List&lt;<span style="color:#ffc66d;">Plane</span>&gt; planes, <span style="color:#ffc66d;">Curve</span> crv, <span style="color:#ffc66d;">out Plane</span> p)
{
    <span style="color:#cc7832;">bool</span> find = <span style="color:#cc7832;">false</span>;
    p = <span style="color:#ffc66d;">Plane</span>.Unset;

    <span style="color:#cc7832;">foreach</span> (<span style="color:#cc7832;">var</span> pl <span style="color:#cc7832;">in</span> planes)
    {
        <span style="color:#cc7832;">double</span> dist1 = Math.Abs(pl.DistanceTo(crv.PointAtStart));
        <span style="color:#cc7832;">double</span> dist2 = Math.Abs(pl.DistanceTo(crv.PointAtEnd));

        <span style="color:#cc7832;">if</span> (dist1 &lt; 0.01 && dist2 &lt; 0.01)
        {
            find = <span style="color:#cc7832;">true</span>;
            p = pl;
            <span style="color:#cc7832;">break</span>;
        }
    }

    <span style="color:#cc7832;">return</span> find;
}

<span style="color:#ffc66d;">public static</span> DataTree&lt;T&gt; MakeDataTree2D&lt;T&gt;(List&lt;List&lt;T&gt;&gt; ret)
{
    DataTree&lt;T&gt; tree = <span style="color:#cc7832;">new</span> DataTree&lt;T&gt;();

    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span style="color:#6897bb;">0</span>; i &lt; ret.Count; i++)
    {
        GH_Path path = <span style="color:#cc7832;">new</span> GH_Path(i);

        <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> j = <span style="color:#6897bb;">0</span>; j &lt; ret[i].Count; j++)
        {
            tree.Add(ret[i][j], path);
        }
    }

    <span style="color:#cc7832;">return</span> tree;
}

<span style="color:#808080;">#endregion</span>
        </pre>
                    </div>
                </div>



                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/05_script2_2.png"
                             onclick="openModal(this)">
                        <h1>C# script Code</h1>
                    </div>

                    <div class="description">
                        <br>
                        <p><strong>C# Code Logic Description:</strong></p>
                        <p>
                            1. dictPlane is a dictionary data structure that groups curves by their corresponding plane.
                        </p>
                        <br>
                        <p>
                            2. Each curve is checked to determine whether it can be associated with a plane; those that cannot are classified as lines.
                        </p>
                        <br>
                        <p>
                            3. When lines overlap in a counterclockwise (CCW) direction, a plane can be established based on the criteria outlined in condition 3 above.
                        </p>
                        <br>
                        <p>
                            4. The plane and associated curves are then stored in the dictionary for management.
                        </p>
                        <br>
                        <p>
                            5. Steps 3 and 4 are repeated for all lines.
                        </p>
                    </div>

                </div>

                <!--key idea img_final-->
            </div>
            <!--panel_final-->

            <!--Text-->
            <div class="col-md-12 work-double-row" style="text-align: center;">
                <h1 class="hero-tag contact-hero fadeInLeft">Full Scripts</h1>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <a href="https://github.com/bic98/grasshopper_idea/blob/main/grasshopper_skill/06_Converting%20the%20given%20line%20into%20a%20flat%20surface.gh">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/Artboard%206.png">
                    </a>
                </div>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/05_script.png"
                         onclick="openModal(this)">
                    <h1>version 1</h1>
                </div>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/05_script2.png"
                         onclick="openModal(this)">
                    <h1>version 2</h1>
                </div>
            </div>

            <!--text_final-->

            <div class="footer-full  fadeIn delay-2s">
                <div class="social-icons">
                    <a target="_blank" href="mailto:bic0893@naver.com"><i class="fas fa-envelope"></i></a>
                    <a target="_blank" href="https://www.instagram.com/in_chanchan"><i class="fab fa-instagram"></i></a>
                    <a target="_blank" href="https://blog.naver.com/bic0893"><i class="fab fa-blogger"></i></a>
                    <a target="_blank" href="https://github.com/bic98"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
        <!-- 모달 구조 -->
        <div id="myModal" class="modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="img01">
        </div>

        <script>
            function openModal(element) {
                var modal = document.getElementById("myModal");
                var modalImg = document.getElementById("img01");

                modal.style.display = "block";
                modalImg.src = element.src; // 클릭한 이미지의 경로를 모달 이미지에 적용
            }

            function closeModal() {
                var modal = document.getElementById("myModal");
                modal.style.display = "none";
            }
        </script>
        <div class="menu-wrap">
            <input type="checkbox" class="toggler">
            <div class="hamburger">
                <div></div>
            </div>
            <div class="menu">
                <div>
                    <div>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Portfolio</a></li>
                            <li><a href="#">Parametric Design</a></li>
                            <li><a disabled href="#" style="text-decoration: line-through;">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
 