<html>

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159411627-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-159411627-1');
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=yes">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <title>10_Arrange the given units at the edges.</title>
    <link rel="icon" type="image/x-icon" href="assets/img/my_site_logo.ico">
</head>
<body id="contact-body" style="overflow-x: hidden;">
<div>
    <nav class="nav-desk">
        <div class="nav-logo">

            <a href="index.html"><img id="logo" src="assets/img/inchanchan.png"></a>

        </div>
        <div class="nav-items">
            <ul>
                <li><span><a href="about.html">About</a></span></li>
                <li><span><a href="work.html">Work</a></span></li>
                <li><span><a href="PM.html">Parametric Design</a></span></li>
                <li><span><a href="Grasshopper_Idea.html"
                             style="text-decoration: line-through;">Grasshopper Idea</a></span></li>
                <li><span><a href="contact.html">Contact</a></span></li>
            </ul>
        </div>
    </nav>

    <!--Content-->
    <div class="animated bounceInUp delay-1s">
        <div class="row" id="work-row">
            <!--Text-->
            <div class="row work-double-row">
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-idea  fadeInLeft">10_Arrange the given units at the edges.</h2>
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <b>Key Ideas:</b>
                        <br><br>
                        1. If the vectors have equal angles between them and equal lengths, the normal vector of the
                        polygon formed by the endpoints of these vectors is equal to the sum of the vectors.
                        <br><br>
                        2. To orient one plane to another in 3D space, similar to applying a sticker
                    </p>
                </div>
            </div>
            <!--text_final-->

            <!--panel-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Key Idea 1 : 1. If the vectors have equal
                        angles between them and equal lengths, the normal vector of the polygon formed by the endpoints
                        of these vectors is equal to the sum of the vectors.</h2>
                </div>
                <!--key idea text_final-->

                <!--key idea img-->

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_idea1_1.png"
                             onclick="openModal(this)">
                        <h1>find normal vector</h1>
                    </div>
                </div>


                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_idea1.png"
                             onclick="openModal(this)">
                        <h1>apply the idea</h1>
                    </div>
                </div>

                <div class="col-md-12" id="left-hero-card-idea">
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <br><br>
                        If the vectors have equal angles between them and equal lengths, consider aligning their initial
                        points to form an n-sided polyhedron. When the sum of all these vectors is computed, you'll find
                        that it aligns with the direction of the normal vector of the n-sided polygon formed by the
                        endpoints of these vectors. Therefore, by checking the angles between the vectors and then
                        unitizing them (converting them into unit vectors), we can achieve the same effect as mentioned
                        earlier.
                    </p>
                </div>
                <!--key idea img_final-->
            </div>
            <!--panel_final-->

            <!--panel-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Key Idea 2 : 2. To orient one plane to another
                        in 3D space, similar to applying a sticker</h2>
                </div>
                <!--key idea text_final-->

                <!--key idea img-->

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <a href="Grasshopper_Idea_Page_8.html" style="text-decoration: none; color: inherit;">
                            <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_idea2_1.png">
                            <h1>the condition making plane</h1>
                        </a>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_idea.png"
                             onclick="openModal(this)">
                        <h1>determine the "x" direction</h1>
                    </div>
                </div>

                <div class="col-md-12" id="left-hero-card-idea">
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <br><br>
                        From this, we can determine the vectors of the unit model and the large object to which it will
                        be oriented. By generating a plane based on the x-direction of these vectors, we can use the
                        orient component to align them, just like placing a sticker. For more details, refer to
                        (08_idea).
                    </p>
                </div>
                <!--key idea img_final-->
            </div>
            <!--panel_final-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">C# Code Implementation</h2>
                </div>
                <!--key idea text_final-->
                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="description">
                        <p><strong>C# Code:</strong></p>
                        <pre style="background-color:#2b2b2b; color:#a9b7c6; padding: 10px; border-radius: 5px;">
<span style="color:#ffc66d;">/// &lt;summary&gt;</span>
<span style="color:#808080;">/// This procedure contains the user code. Input parameters are provided as regular arguments,</span>
<span style="color:#808080;">/// Output parameters as ref arguments. You don't have to assign output parameters,</span>
<span style="color:#808080;">/// they will have a default value.</span>
<span style="color:#ffc66d;">/// &lt;/summary&gt;</span>
<span style="color:#ffc66d;">private void</span> RunScript(List&lt;Curve&gt; obj, List&lt;Point3d&gt; crv, List&lt;Point3d&gt; unit, int id, Brep U, ref object A, ref object B, ref object C, ref object D)
{
    List&lt;Plane&gt; p = <span style="color:#cc7832;">new</span> List&lt;Plane&gt;();

    <span style="color:#808080;">// Iterate over each point in the crv list to calculate the normal vector</span>
    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">0</span>; i &lt; crv.Count; i++)
    {
        <span style="color:#808080;">// Find all curves passing through the current point</span>
        <span style="color:#cc7832;">var</span> poc = PointsInCurves(obj, crv[i]);
        Vector3d normal = <span style="color:#cc7832;">new</span> Vector3d();

        <span style="color:#808080;">// Calculate the normal vector by summing unit vectors towards curve centers</span>
        <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> j = <span
                                style="color:#6897bb;">0</span>; j &lt; poc.Count; j++)
        {
            <span style="color:#cc7832;">var</span> mid = CurveCenter(poc[j]);
            <span style="color:#cc7832;">var</span> tmpV = <span style="color:#cc7832;">new</span> Vector3d(mid - crv[i]);
            tmpV.Unitize();
            normal += tmpV;
        }

        <span style="color:#808080;">// Create a plane using the point, the calculated normal, and the Z-axis</span>
        Plane pl = <span style="color:#cc7832;">new</span> Plane(crv[i], -normal, <span
                                style="color:#cc7832;">new</span> Vector3d(<span style="color:#6897bb;">0</span>, <span
                                style="color:#6897bb;">0</span>, -normal.Z));
        p.Add(pl);
    }

    <span style="color:#808080;">// Find the closest point to the unit[id] and calculate the unit normal</span>
    <span style="color:#cc7832;">var</span> unitP = CloPts(unit, unit[id], <span style="color:#6897bb;">1</span>);
    Vector3d unitNormal = <span style="color:#cc7832;">new</span> Vector3d(unitP[<span style="color:#6897bb;">0</span>] - unit[id]);
    Plane unitPl = <span style="color:#cc7832;">new</span> Plane(unit[id], unitNormal, <span
                                style="color:#cc7832;">new</span> Vector3d(<span style="color:#6897bb;">0</span>, <span
                                style="color:#6897bb;">0</span>, unitNormal.Z));

    List&lt;Brep&gt; ans = <span style="color:#cc7832;">new</span> List&lt;Brep&gt;();

    <span style="color:#808080;">// Duplicate and orient the Brep based on the calculated planes</span>
    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">0</span>; i &lt; p.Count; i++)
    {
        Brep dU = U.DuplicateBrep();
        Brep oU = MoveOrientPlane(dU, unitPl, p[i]);
        ans.Add(oU);
    }

    <span style="color:#808080;">// Assign the results to the output variables</span>
    A = ans;
    B = unit[id];
    C = unitPl;
    D = p;
}

<span style="color:#808080;">// Method to move and orient geometry based on two planes</span>
<span style="color:#cc7832;">public</span> T MoveOrientPlane&lt;T&gt;(T obj, Plane baseNow, Plane baseNxt) <span
                                style="color:#cc7832;">where T : GeometryBase</span>
{
    Transform orient = Transform.PlaneToPlane(baseNow, baseNxt);
    obj.Transform(orient);
    <span style="color:#cc7832;">return</span> obj;
}

<span style="color:#808080;">// Method to find the center of a curve</span>
<span style="color:#cc7832;">public Point3d</span> CurveCenter(Curve c)
{
    <span style="color:#cc7832;">var</span> arr = c.DivideByCount(<span style="color:#6897bb;">2</span>, <span
                                style="color:#cc7832;">true</span>);
    <span style="color:#cc7832;">var</span> ans = c.PointAt(arr[<span style="color:#6897bb;">1</span>]);
    <span style="color:#cc7832;">return</span> ans;
}

<span style="color:#808080;">// Method to find curves that pass through a given point</span>
<span style="color:#cc7832;">public</span> List&lt;Curve&gt; PointsInCurves(List&lt;Curve&gt; crves, Point3d pt)
{
    List&lt;Curve&gt; ans = <span style="color:#cc7832;">new</span> List&lt;Curve&gt;();

    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">0</span>; i &lt; crves.Count; i++)
    {
        <span style="color:#cc7832;">double</span> t;
        <span style="color:#cc7832;">if</span> (crves[i].ClosestPoint(pt, <span
                                style="color:#ffc66d;">out</span> t, <span style="color:#6897bb;">0.001</span>))
        {
            ans.Add(crves[i]);
        }
    }

    <span style="color:#cc7832;">return</span> ans;
}

<span style="color:#808080;">// Method to find the closest points to a given point</span>
<span style="color:#cc7832;">public</span> List&lt;Point3d&gt; CloPts(List&lt;Point3d&gt; pts, Point3d now, <span
                                style="color:#cc7832;">int</span> cnt)
{
    pts.Sort((u, v) => u.DistanceTo(now).CompareTo(v.DistanceTo(now)));
    List&lt;Point3d&gt; ans = <span style="color:#cc7832;">new</span> List&lt;Point3d&gt;();

    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">0</span>; i &lt; pts.Count; i++)
    {
        <span style="color:#cc7832;">if</span> (ans.Count == cnt) <span style="color:#cc7832;">break</span>;
        <span style="color:#cc7832;">if</span> (pts[i] == now) <span style="color:#cc7832;">continue</span>;
        ans.Add(pts[i]);
    }

    <span style="color:#cc7832;">return</span> ans;
}
            </pre>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_script2.png"
                             onclick="openModal(this)">
                        <h1>C# Script Code</h1>
                    </div>

                    <div class="description">
                        <br>
                        <p><strong>C# Code Logic Description:</strong></p>
                        <p>1. Iterate over each point in the list and calculate the normal vector by summing unit
                            vectors towards curve centers.</p>
                        <br>
                        <p>2. Create a plane using each point and the calculated normal vector, and store the planes in
                            a list.</p>
                        <br>
                        <p>3. Find the closest point to the reference point in the unit list and calculate the normal
                            vector.</p>
                        <br>
                        <p>4. Duplicate and orient the Brep based on the calculated planes.</p>
                        <br>
                        <p>5. Assign the oriented Breps to the output variables, along with the reference point and
                            planes.</p>
                        <br>
                        <p>6. Additional helper functions are used to handle geometry transformations and point/curve
                            operations.</p>
                    </div>
                </div>
            </div>

            <!--Text-->
            <div class="col-md-12 work-double-row" style="text-align: center;">
                <h1 class="hero-tag contact-hero fadeInLeft">Full Scripts</h1>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <a href="https://github.com/bic98/useful_grasshopper_component/blob/main/component%20files/grasshopper_skill/10_Arrange%20the%20given%20units%20at%20the%20edges.gh">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/Artboard%2010.png">
                    </a>
                </div>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_script.png"
                         onclick="openModal(this)">
                    <h1>version 1</h1>
                </div>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/10_script2.png"
                         onclick="openModal(this)">
                    <h1>version 2</h1>
                </div>
            </div>

            <!--text_final-->

            <div class="footer-full  fadeIn delay-2s">
                <div class="social-icons">
                    <a target="_blank" href="mailto:bic0893@naver.com"><i class="fas fa-envelope"></i></a>
                    <a target="_blank" href="https://www.instagram.com/in_chanchan"><i class="fab fa-instagram"></i></a>
                    <a target="_blank" href="https://blog.naver.com/bic0893"><i class="fab fa-blogger"></i></a>
                    <a target="_blank" href="https://github.com/bic98"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
        <!-- 모달 구조 -->
        <div id="myModal" class="modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="img01">
        </div>

        <script>
            function openModal(element) {
                var modal = document.getElementById("myModal");
                var modalImg = document.getElementById("img01");

                modal.style.display = "block";
                modalImg.src = element.src; // 클릭한 이미지의 경로를 모달 이미지에 적용
            }

            function closeModal() {
                var modal = document.getElementById("myModal");
                modal.style.display = "none";
            }
        </script>
        <div class="menu-wrap">
            <input type="checkbox" class="toggler">
            <div class="hamburger">
                <div></div>
            </div>
            <div class="menu">
                <div>
                    <div>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Portfolio</a></li>
                            <li><a href="#">Parametric Design</a></li>
                            <li><a disabled href="#" style="text-decoration: line-through;">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
 