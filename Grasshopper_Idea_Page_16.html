<html>

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159411627-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-159411627-1');
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=yes">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <title>16_Divide surface.</title>
    <link rel="icon" type="image/x-icon" href="assets/img/my_site_logo.ico">
</head>
<body id="contact-body" style="overflow-x: hidden;">
<div>
    <nav class="nav-desk">
        <div class="nav-logo">

            <a href="index.html"><img id="logo" src="assets/img/inchanchan.png"></a>

        </div>
        <div class="nav-items">
            <ul>
                <li><span><a href="about.html">About</a></span></li>
                <li><span><a href="work.html">Work</a></span></li>
                <li><span><a href="PM.html">Parametric Design</a></span></li>
                <li><span><a href="Grasshopper_Idea.html"
                             style="text-decoration: line-through;">Grasshopper Idea</a></span></li>
                <li><span><a href="contact.html">Contact</a></span></li>
            </ul>
        </div>
    </nav>

    <!--Content-->
    <div class="animated bounceInUp delay-1s">
        <div class="row" id="work-row">
            <!--Text-->
            <div class="row work-double-row">
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-idea  fadeInLeft">16_Divide surface.</h2>
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <b>Key Ideas:</b>
                        <br><br>
                        1. gcd algorithm
                        <br><br>
                        2. Get divisions of integer N
                    </p>
                </div>
            </div>
            <!--text_final-->

            <!--panel-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Key Idea 1 : 1. gcd algorithm</h2>
                </div>
                <!--key idea text_final-->

                <!--key idea img-->

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_idea1_1.png"
                             onclick="openModal(this)">
                        <h1>main idea</h1>
                    </div>
                </div>


                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_idea1.png"
                             onclick="openModal(this)">
                        <h1>By applying this concept</h1>
                    </div>
                </div>

                <div class="col-md-12" id="left-hero-card-idea">
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <br><br>
                        By using the GCD algorithm, you can extract lines that have the same directional vector. Then,
                        you compute the GCD of the lengths of all these lines to determine the largest possible `w` and
                        `h` that can fit within those lines.
                        <br><br>
                        To extract the lines, you can select one line and use the dot product to determine if other
                        lines have the same direction. If the absolute value of the dot product between the chosen line
                        and any other line is 1, they share the same direction.
                        <br><br>
                        Finding the GCD of all lines is very efficient, with a time complexity of `O(log(min(w, h)))`,
                        allowing you to find it very quickly.
                    </p>
                </div>
                <!--key idea img_final-->
            </div>
            <!--panel_final-->

            <!--panel-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">Key Idea 2 : 2. Get divisions of integer
                        N</h2>
                </div>
                <!--key idea text_final-->

                <!--key idea img-->

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_idea2_1.png"
                             onclick="openModal(this)">
                        <h1>main idea</h1>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_idea2.png"
                             onclick="openModal(this)">
                        <h1>explain the component</h1>
                    </div>
                </div>

                <div class="col-md-12" id="left-hero-card-idea">
                    <p class="hero-des contact-des  fadeIn delay-1s">
                        <br><br>
                        By applying this concept, you can find the greatest common divisor (GCD) of the width `W` and
                        height `H` of a rectangle. Then, you divide the rectangle into square cells with sides equal to
                        the GCD. This approach ensures that the entire original rectangle is covered perfectly with
                        square cells, with no gaps or overlaps.
                    </p>
                </div>
                <!--key idea img_final-->
            </div>
            <!--panel_final-->
            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">C# Code Implementation</h2>
                </div>
                <!--key idea text_final-->
                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="description">
                        <p><strong>C# Code:</strong></p>
                        <pre style="background-color:#2b2b2b; color:#a9b7c6; padding: 10px; border-radius: 5px;">
<span style="color:#ffc66d;">private void</span> RunScript(Curve x, object y, ref object crvesL, ref object crvesR, ref object gcd)
{
    <span style="color:#808080;">// Duplicate segments of the input curve</span>
    <span style="color:#cc7832;">var</span> seg = x.DuplicateSegments();
    Curve reference = seg[0];
    Vector3d refV = reference.PointAtEnd - reference.PointAtStart;

    <span style="color:#808080;">// Initialize lists for left (L) and right (R) curves</span>
    List&lt;Curve&gt; L = <span style="color:#cc7832;">new</span> List&lt;Curve&gt; { reference };
    List&lt;Curve&gt; R = <span style="color:#cc7832;">new</span> List&lt;Curve&gt;();

    <span style="color:#808080;">// Iterate through the segments and separate them into L or R</span>
    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">1</span>; i &lt; seg.Length; i++)
    {
        <span style="color:#cc7832;">var</span> now = seg[i];
        <span style="color:#cc7832;">var</span> nowV = now.PointAtEnd - now.PointAtStart;
        <span style="color:#cc7832;">double</span> dotProduct = Math.Abs(Vector3d.Multiply(refV, nowV));

        <span style="color:#808080;">// If the dot product is small, add to R, else add to L</span>
        <span style="color:#cc7832;">if</span> (dotProduct &lt; <span style="color:#6897bb;">0.01</span>)
            R.Add(now);
        <span style="color:#cc7832;">else</span>
            L.Add(now);
    }

    <span style="color:#808080;">// Calculate GCD for left side curves</span>
    <span style="color:#cc7832;">int</span> w, h;
    w = (<span style="color:#cc7832;">int</span>) Math.Round(L[0].GetLength());
    Print(w.ToString());
    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">1</span>; i &lt; L.Count; i++)
    {
        w = Gcd(w, (<span style="color:#cc7832;">int</span>) Math.Round(L[i].GetLength()));
        Print(w.ToString());
    }

    <span style="color:#808080;">// Calculate GCD for right side curves</span>
    h = (<span style="color:#cc7832;">int</span>) Math.Round(R[0].GetLength());
    Print(h.ToString());
    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">1</span>; i &lt; R.Count; i++)
    {
        h = Gcd(h, (<span style="color:#cc7832;">int</span>) Math.Round(R[i].GetLength()));
        Print(h.ToString());
    }

    <span style="color:#808080;">// Find the overall GCD of left and right side GCDs</span>
    gcd = Gcd(w, h);

    <span style="color:#808080;">// Set output variables</span>
    crvesL = L;
    crvesR = R;
}

<span style="color:#808080;">// Function to calculate the greatest common divisor (GCD)</span>
<span style="color:#cc7832;">public int</span> Gcd(<span style="color:#cc7832;">int</span> a, <span
                                style="color:#cc7832;">int</span> b)
{
    <span style="color:#cc7832;">while</span> (b != <span style="color:#6897bb;">0</span>)
    {
        <span style="color:#cc7832;">int</span> temp = b;
        b = a % b;
        a = temp;
    }

    <span style="color:#808080;">// Return the absolute value of the GCD</span>
    <span style="color:#cc7832;">return</span> Math.Abs(a);
}
            </pre>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_script1.png"
                             onclick="openModal(this)">
                        <h1>C# Script Code</h1>
                    </div>

                    <div class="description">
                        <br>
                        <p><strong>C# Code Logic Description:</strong></p>
                        <p>1. **Initialize Segments and Reference**: Duplicate the segments of the input curve `x` and
                            use the first segment as the reference for comparison.</p>
                        <br>
                        <p>2. **Compute Reference Vector**: Calculate the vector `refV` from the start to the end of the
                            reference segment.</p>
                        <br>
                        <p>3. **Separate Curves into Left and Right Lists**: Iterate through the remaining segments and
                            compute the dot product of each segment's vector with `refV`.</p>
                        <br>
                        <p>4. **Classify Based on Dot Product**: If the absolute value of the dot product is less than
                            `0.01`, add the segment to the right list (`R`), otherwise to the left list (`L`).</p>
                        <br>
                        <p>5. **Initialize GCD Calculation for Left List**: Start by calculating the length of the first
                            curve in the left list and convert it to an integer.</p>
                        <br>
                        <p>6. **Iterate Through Left Curves for GCD**: For each subsequent curve in the left list,
                            compute the GCD of its length with the running GCD value.</p>
                        <br>
                        <p>7. **Initialize GCD Calculation for Right List**: Perform the same GCD calculation for the
                            curves in the right list, starting with the length of the first curve.</p>
                        <br>
                        <p>8. **Iterate Through Right Curves for GCD**: Continue calculating the GCD for the lengths of
                            the curves in the right list, as was done for the left.</p>
                        <br>
                        <p>9. **Compute Overall GCD**: Calculate the final GCD value by taking the GCD of the two GCDs
                            derived from the left and right lists.</p>
                        <br>
                        <p>10. **Set Output Variables**: Assign the separated lists of curves (`L` and `R`) and the
                            computed GCD to the respective output variables `crvesL`, `crvesR`, and `gcd`.</p>
                        <br>
                        <p>11. **Define GCD Function**: The `Gcd` function uses the Euclidean algorithm to compute the
                            greatest common divisor of two integers.</p>
                        <br>
                        <p>12. **Print Debug Information**: Print intermediate values of `w` and `h` during GCD
                            calculation for debugging purposes.</p>
                    </div>
                </div>
            </div>


            <div class="row work-double-row">
                <!--key idea text-->
                <div class="col-md-12" id="left-hero-card-idea">
                    <h2 class="hero-tag contact-hero-key-idea fadeInLeft">C# Code Implementation</h2>
                </div>
                <!--key idea text_final-->
                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="description">
                        <p><strong>C# Code:</strong></p>
                        <pre style="background-color:#2b2b2b; color:#a9b7c6; padding: 10px; border-radius: 5px;">
<span style="color:#ffc66d;">private void</span> RunScript(<span style="color:#cc7832;">int</span> x, <span
                                style="color:#cc7832;">int</span> y, ref object A)
{
    <span style="color:#808080;">// Get the list of divisors for the number x</span>
    <span style="color:#cc7832;">var</span> li = GetDivisors(x);

    <span style="color:#808080;">// Set the output A to the y-th divisor (modulo the number of divisors)</span>
    A = li[y % li.Count];
}

<span style="color:#808080;">// Function to find all divisors of a given integer n</span>
<span style="color:#cc7832;">public List&lt;int&gt;</span> GetDivisors(<span style="color:#cc7832;">int</span> n)
{
    List&lt;<span style="color:#cc7832;">int</span>&gt; divisors = <span style="color:#cc7832;">new</span> List&lt;<span
                                style="color:#cc7832;">int</span>&gt;();

    <span style="color:#808080;">// Loop through numbers from 1 to sqrt(n) to find divisors</span>
    <span style="color:#cc7832;">for</span> (<span style="color:#cc7832;">int</span> i = <span
                                style="color:#6897bb;">1</span>; i &lt;= Math.Sqrt(n); i++)
    {
        <span style="color:#808080;">// If i is a divisor of n</span>
        <span style="color:#cc7832;">if</span> (n % i == <span style="color:#6897bb;">0</span>)
        {
            divisors.Add(i);

            <span style="color:#808080;">// Avoid adding duplicate divisors (e.g., for perfect squares)</span>
            <span style="color:#cc7832;">if</span> (i != n / i)
            {
                divisors.Add(n / i);
            }
        }
    }

    <span style="color:#808080;">// Sort the divisors in ascending order</span>
    divisors.Sort();

    <span style="color:#808080;">// Return the sorted list of divisors</span>
    <span style="color:#cc7832;">return</span> divisors;
}
            </pre>
                    </div>
                </div>

                <div class="col-md-6 col-sm-12 bounceInLeft delay-3s">
                    <div class="work-hero-card-idea">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_script2.png"
                             onclick="openModal(this)">
                        <h1>C# Script Code</h1>
                    </div>

                    <div class="description">
                        <br>
                        <p><strong>C# Code Logic Description:</strong></p>
                        <p>1. **Initialize the RunScript Method**: The `RunScript` method takes two integer inputs, `x`
                            and `y`, and a reference output object `A`.</p>
                        <br>
                        <p>2. **Find Divisors**: The method calls `GetDivisors(x)` to obtain all divisors of the number
                            `x`.</p>
                        <br>
                        <p>3. **Calculate Divisor Position**: The position of the divisor to be returned is calculated
                            using the modulo operation `y % li.Count` to handle cases where `y` exceeds the number of
                            divisors.</p>
                        <br>
                        <p>4. **Set Output**: The result is stored in output `A`, which corresponds to the `y`-th
                            divisor (after applying modulo) in the sorted list of divisors.</p>
                        <br>
                        <p>5. **Define GetDivisors Function**: The `GetDivisors` function is defined to compute all
                            divisors of the integer `n` efficiently.</p>
                        <br>
                        <p>6. **Loop from 1 to sqrt(n)**: The function loops from `1` to `sqrt(n)` to check for
                            potential divisors, reducing the number of iterations required.</p>
                        <br>
                        <p>7. **Check for Divisors**: For each integer `i` in the loop, it checks if `i` divides `n`
                            without leaving a remainder (`n % i == 0`). If true, `i` is a divisor.</p>
                        <br>
                        <p>8. **Avoid Duplicate Divisors**: To avoid duplicate entries (particularly when `n` is a
                            perfect square), it checks if `i` is not equal to `n / i` before adding the second
                            divisor.</p>
                        <br>
                        <p>9. **Sort Divisors**: The list of divisors is sorted in ascending order to provide an ordered
                            sequence.</p>
                        <br>
                        <p>10. **Return Divisors**: The sorted list of divisors is returned for use in the `RunScript`
                            function.</p>
                        <br>
                        <p>11. **Efficient Divisor Calculation**: By only looping up to `sqrt(n)`, the function is
                            efficient in finding divisors, avoiding unnecessary iterations.</p>
                        <br>
                        <p>12. **Flexible Output Handling**: The use of modulo operation ensures that the function can
                            handle any value of `y`, providing a valid divisor regardless of its size.</p>
                    </div>
                </div>
            </div>


            <!--Text-->
            <div class="col-md-12 work-double-row" style="text-align: center;">
                <h1 class="hero-tag contact-hero fadeInLeft">Full Scripts</h1>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <a href="https://github.com/bic98/useful_grasshopper_component/blob/main/component%20files/grasshopper_skill/16_Divide%20surface.gh">
                        <img class="work-card-hero-img" src="assets/grasshopper_idea/Artboard%2016.png">
                    </a>
                </div>
            </div>

            <div class="col-md-12 col-sm-12 work-double-row bounceInLeft delay-3s">
                <div class="work-hero-card-idea">
                    <img class="work-card-hero-img" src="assets/grasshopper_idea/detail/16_script.png"
                         onclick="openModal(this)">
                    <h1>version 1</h1>
                </div>
            </div>

            <!--text_final-->

            <div class="footer-full  fadeIn delay-2s">
                <div class="social-icons">
                    <a target="_blank" href="mailto:bic0893@naver.com"><i class="fas fa-envelope"></i></a>
                    <a target="_blank" href="https://www.instagram.com/in_chanchan"><i class="fab fa-instagram"></i></a>
                    <a target="_blank" href="https://blog.naver.com/bic0893"><i class="fab fa-blogger"></i></a>
                    <a target="_blank" href="https://github.com/bic98"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
        <!-- 모달 구조 -->
        <div id="myModal" class="modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="img01">
        </div>

        <script>
            function openModal(element) {
                var modal = document.getElementById("myModal");
                var modalImg = document.getElementById("img01");

                modal.style.display = "block";
                modalImg.src = element.src; // 클릭한 이미지의 경로를 모달 이미지에 적용
            }

            function closeModal() {
                var modal = document.getElementById("myModal");
                modal.style.display = "none";
            }
        </script>
        <div class="menu-wrap">
            <input type="checkbox" class="toggler">
            <div class="hamburger">
                <div></div>
            </div>
            <div class="menu">
                <div>
                    <div>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Portfolio</a></li>
                            <li><a href="#">Parametric Design</a></li>
                            <li><a disabled href="#" style="text-decoration: line-through;">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
 